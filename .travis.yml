sudo: false

addons:
  apt:
    packages:
      - libgd2-noxpm-dev # Required for gnuplot png terminal
      
language: perl

env:
  gp_version=5.0.5
  
perl:
    - "5.26"
    - "5.24"
    - "5.22"
    - "5.20"
    - "5.18"
    - "5.16"
    - "5.14"

install:
  # Install gnuplot 5 for plot tests. (Not available on Ubuntu 12.04)
  - cd /tmp
  - wget http://mirrors.ctan.org/graphics/gnuplot/$gp_version/gnuplot-$gp_version.tar.gz
  - tar -xf gnuplot-$gp_version.tar.gz
  - cd gnuplot-$gp_version
  - ./configure --prefix=$HOME/local
  - make -j2
  - make install
  - export PATH="$HOME/local/bin:$PATH"
  - gnuplot --version
  # Sometimes Alien::Gnuplot does not find the installed gnuplot
  # (but problem not reproducible, see
  # https://travis-ci.org/lab-measurement/Lab-Measurement/jobs/378743671
  - export GNUPLOT_BINARY=/home/travis/local/bin/gnuplot


script:
  cd $TRAVIS_BUILD_DIR
  perl Makefile.PL
  make
notifications:
  email: false
